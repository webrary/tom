var ts=ts||{};ts.tom=ts.tom||{},ts.tom.utils=ts.tom.utils||{},ts.tom.utils.string=ts.tom.utils.string||{},ts.tom.utils.string.nthIndexOf=function(t,e,n){"use strict";var o=0,s=-2;for(n=(n=parseInt(n,10))&&n>0?n:1;n>o&&-1!==s;)s=t.indexOf(e,s+1),o++;return s},ts.tom.utils.string.occurrences=function(t,e){"use strict";var n=0,o=-2,s=[];if(e.length<1)return[{nth:Number.POSITIVE_INFINITY,position:Number.POSITIVE_INFINITY},{nth:Number.POSITIVE_INFINITY,position:-1}];for(;-1!==o&&(o=t.indexOf(e,o+1),!(0>o));)s.push({nth:++n,position:o});return s},ts.tom.utils.string.times=function(t,e){"use strict";var n=ts.tom.utils.string.occurrences(t,e),o=n[n.length-1];return o?o.nth:0},ts.tom.utils.string.compact=function(t){"use strict";return t.replace(/\s+/gm,"")},ts.tom.utils.string.trim=function(t){"use strict";return t.replace(/(^\s*)|(\s*$)/g,"")};var ts=ts||{};ts.tom=ts.tom||{},ts.tom.core=ts.tom.core||{},ts.tom.core.Selection=function(t){this.range_=t},ts.tom.core.Selection.prototype.getTextNodes=function(){"use strict";function t(t,e){var n=t.splitText(e);return n.startPosition=t.startPosition+ts.tom.utils.string.compact(t.data).length,n.endPosition=t.endPosition,t.endPosition=n.startPosition-1,n}var e=this.range_.startContainer,n=this.range_.endContainer,o=this.range_.startOffset,s=this.range_.endOffset,r=document.body.data.tNodes,i=r.indexOf(e),a=t(e,o);a.length>0&&r.splice(i+1,0,a),n===e&&(n=a,s-=o);var c=r.indexOf(n),u=t(n,s);return u.length>0&&r.splice(c+1,0,u),r.slice(i+1,c+1)},ts.tom.core.Selection.prototype.getIndex=function(){"use strict";var t=this.range_.endContainer;if(!(t instanceof Text&&this.range_.startContainer instanceof Text))throw new Error("illegal selection");var e=this.range_.endOffset,n=ts.tom.utils.string.compact(t.substringData(0,e)),o=n?n.length:0;if(1>o)throw new Error("illegal selection");var s=ts.tom.utils.string.compact(this.range_.toString());return ts.tom.utils.string.times(document.body.data.tText.substr(0,t.startPosition+o),s)},ts.tom.core.Selection.prototype.getSelection=function(){var t=window.getSelection();return t.rangeCount<1&&t.addRange(this.range_),t},ts.tom.core.Selection.from=function(t,e,n){var o=window.getSelection();if(!t&&o.rangeCount>0)return new ts.tom.core.Selection(window.getSelection().getRangeAt(0));var s=ts.tom.core.Selection.rangeFrom_(t,e);return n&&(o.removeAllRanges(),o.addRange(s)),new ts.tom.core.Selection(s)},ts.tom.core.Selection.rangeFrom_=function(t,e){"use strict";function n(t,e,n){for(var o=0,s=0;e+n>o;s++)/\s+/m.test(t[s])||o++;return s-n}if(t){var o=document.body.data.tText,s=document.body.data.tNodes,r=document.createRange(),i=ts.tom.utils.string.compact(t),a=ts.tom.utils.string.nthIndexOf(o,i,e||1);if(a>-1){for(var c=a+s[0].startPosition,u=c+i.length,l=null,m=null,d=0;d<s.length;d++){var g=s[d];if(!l&&g.endPosition>=c&&(l=s[d]),g.startPosition>=u){m=s[d-1];break}}if(null!==l){m=m||s[s.length-1];var f=n(l.data,c-l.startPosition,1),h=n(m.data,u-m.startPosition,0);r.setStart(l,f),r.setEnd(m,h)}}return r}return document.createRange()},window.addEventListener("load",function(){"use strict";function t(t){function e(t){if(3===t.nodeType&&/\S/.test(t.data))n.push(t);else if(1===t.nodeType&&!o.test(t,null))for(var s=0,r=t.childNodes.length;r>s;++s)e(t.childNodes[s])}var n=[],o={elements:["applet","area","base","basefont","bdo","button","frame","frameset","iframe","head","hr","img","input","link","map","meta","noframes","noscript","optgroup","option","param","script","select","style","textarea","title"],test:function(t,e){var n=e||this.elements;return n.indexOf(t.tagName.toLowerCase())>-1}};return e(t),n}var e=t(document.body),n=0,o="";e.forEach(function(t){t.startPosition=n;var e=ts.tom.utils.string.compact(t.data);o+=e,n+=e.length,t.endPosition=n-1}),document.body.data={tNodes:e,tText:o}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0cmluZy5qcyIsInNlbGVjdGlvbi5qcyJdLCJuYW1lcyI6WyJ0cyIsInRvbSIsInV0aWxzIiwic3RyaW5nIiwibnRoSW5kZXhPZiIsImNvbnRlbnQiLCJzZWFyY2hTdHJpbmciLCJudGgiLCJ0aW1lcyIsImluZGV4IiwicGFyc2VJbnQiLCJpbmRleE9mIiwib2NjdXJyZW5jZXMiLCJwb3NpdGlvbiIsInJlc3VsdCIsImxlbmd0aCIsIk51bWJlciIsIlBPU0lUSVZFX0lORklOSVRZIiwicHVzaCIsIm9jY3VycyIsInRlbXAiLCJjb21wYWN0IiwicmVwbGFjZSIsInRyaW0iLCJjb3JlIiwiU2VsZWN0aW9uIiwicmFuZ2UiLCJ0aGlzIiwicmFuZ2VfIiwicHJvdG90eXBlIiwiZ2V0VGV4dE5vZGVzIiwic3BsaXQiLCJjb250YWluZXIiLCJvZmZzZXQiLCJycCIsInNwbGl0VGV4dCIsInN0YXJ0UG9zaXRpb24iLCJkYXRhIiwiZW5kUG9zaXRpb24iLCJzYyIsImVjIiwic28iLCJzdGFydE9mZnNldCIsImVvIiwiZW5kT2Zmc2V0IiwiYk5vZGVzIiwiZG9jdW1lbnQiLCJib2R5IiwidE5vZGVzIiwic2kiLCJzcnAiLCJzcGxpY2UiLCJlaSIsImVycCIsInNsaWNlIiwiZ2V0SW5kZXgiLCJlbmRDb250YWluZXIiLCJUZXh0Iiwic3RhcnRDb250YWluZXIiLCJFcnJvciIsImNIZWFkIiwic3Vic3RyaW5nRGF0YSIsImNMZW5ndGgiLCJjVGV4dCIsInRvU3RyaW5nIiwidFRleHQiLCJzdWJzdHIiLCJnZXRTZWxlY3Rpb24iLCJzZWxlY3Rpb24iLCJ3aW5kb3ciLCJyYW5nZUNvdW50IiwiYWRkUmFuZ2UiLCJmcm9tIiwib3B0X3RleHQiLCJvcHRfbnRoIiwib3B0X3NlbGVjdCIsImdldFJhbmdlQXQiLCJyYW5nZUZyb21fIiwicmVtb3ZlQWxsUmFuZ2VzIiwidGV4dCIsInN0ciIsImNvdW50IiwiaXNTdGFydCIsImkiLCJqIiwidGVzdCIsImJUZXh0IiwiY3JlYXRlUmFuZ2UiLCJjU3RhcnRQb3MiLCJjRW5kUG9zIiwibm9kZSIsInNldFN0YXJ0Iiwic2V0RW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVsZW1lbnQiLCJub2RlVHlwZSIsIm5vZGVzIiwiZWxlc1RvU2tpcCIsImxlbiIsImNoaWxkTm9kZXMiLCJlbGVtZW50cyIsImxpc3QiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJib2R5Tm9kZXMiLCJjQm9keVRleHQiLCJmb3JFYWNoIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxJQUFBQSxNQUNBQSxJQUFBQyxJQUFBRCxHQUFBQyxRQUNBRCxHQUFBQyxJQUFBQyxNQUFBRixHQUFBQyxJQUFBQyxVQUNBRixHQUFBQyxJQUFBQyxNQUFBQyxPQUFBSCxHQUFBQyxJQUFBQyxNQUFBQyxXQVVBSCxHQUFBQyxJQUFBQyxNQUFBQyxPQUFBQyxXQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsWUFDQSxJQUFBQyxHQUFBLEVBQUFDLEVBQUEsRUFFQSxLQURBRixHQUFBQSxFQUFBRyxTQUFBSCxFQUFBLE1BQUFBLEVBQUEsRUFBQUEsRUFBQSxFQUNBQSxFQUFBQyxHQUFBLEtBQUFDLEdBQ0FBLEVBQUFKLEVBQUFNLFFBQUFMLEVBQUFHLEVBQUEsR0FDQUQsR0FFQSxPQUFBQyxJQVVBVCxHQUFBQyxJQUFBQyxNQUFBQyxPQUFBUyxZQUFBLFNBQUFQLEVBQUFDLEdBQ0EsWUFDQSxJQUFBRSxHQUFBLEVBQUFLLEVBQUEsR0FBQUMsSUFDQSxJQUFBUixFQUFBUyxPQUFBLEVBQ0EsUUFDQVIsSUFBQVMsT0FBQUMsa0JBQUFKLFNBQUFHLE9BQUFDLG9CQUNBVixJQUFBUyxPQUFBQyxrQkFBQUosU0FBQSxJQUdBLE1BQUEsS0FBQUEsSUFDQUEsRUFBQVIsRUFBQU0sUUFBQUwsRUFBQU8sRUFBQSxLQUNBLEVBQUFBLEtBR0FDLEVBQUFJLE1BQUFYLE1BQUFDLEVBQUFLLFNBQUFBLEdBRUEsT0FBQUMsSUFVQWQsR0FBQUMsSUFBQUMsTUFBQUMsT0FBQUssTUFBQSxTQUFBSCxFQUFB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QUFBa0IsUUFBQXFFLEVBQUFyRCxLQUNBb0UsSUFBQTFDLEVBQ0FsRCxHQUFBa0QsRUFBQWhELE9BQ0EyRSxFQUFBcEQsWUFBQXpCLEVBQUEsSUFFQWlDLFNBQUFDLEtBQUFWLE1BSUFXLE9BQUF3RCxFQUlBdkMsTUFBQXdDIiwiZmlsZSI6InRvbS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdHMgPSB0cyB8fCB7fTtcclxudHMudG9tID0gdHMudG9tIHx8IHt9O1xyXG50cy50b20udXRpbHMgPSB0cy50b20udXRpbHMgfHwge307XHJcbnRzLnRvbS51dGlscy5zdHJpbmcgPSB0cy50b20udXRpbHMuc3RyaW5nIHx8IHt9O1xyXG5cclxuXHJcbi8qKlxyXG4gKiB0aGUgcG9zaXRpb24gb2YgdGhlIG50aCBvY2N1cnJlbmNlIG9mIHNlYXJjaFN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VhcmNoU3RyaW5nXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBudGggPSAxXHJcbiAqIEByZXR1cm4ge251bWJlcn0gc3RhcnQgcG9zaXRpb24gb2YgdGhlIG50aCBvY2N1cnJlbmNlIG9mIDxlbT5zZWFyY2hTdHJpbmc8L2VtPlxyXG4gKi9cclxudHMudG9tLnV0aWxzLnN0cmluZy5udGhJbmRleE9mID0gZnVuY3Rpb24oY29udGVudCwgc2VhcmNoU3RyaW5nLCBudGgpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgdmFyIHRpbWVzID0gMCwgaW5kZXggPSAtMjtcclxuICBudGggPSAobnRoID0gcGFyc2VJbnQobnRoLCAxMCkpICYmIG50aCA+IDAgPyBudGggOiAxO1xyXG4gIHdoaWxlICh0aW1lcyA8IG50aCAmJiBpbmRleCAhPT0gLTEpIHtcclxuICAgIGluZGV4ID0gY29udGVudC5pbmRleE9mKHNlYXJjaFN0cmluZywgaW5kZXggKyAxKTtcclxuICAgIHRpbWVzKys7XHJcbiAgfVxyXG4gIHJldHVybiBpbmRleDtcclxufTtcclxuXHJcblxyXG4vKipcclxuICogdGhlIG9jY3VycmVuY2VzKGluY2x1ZGUgdGhlIHBvc2l0aW9ucykgb2Ygc2VhcmNoU3RyaW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWFyY2hTdHJpbmdcclxuICogQHJldHVybiB7QXJyYXkuPHtudGgscG9zaXRpb259Pn0gbGlzdCBvZiB0aGUgb2NjdXJyZW5jZXNcclxuICovXHJcbnRzLnRvbS51dGlscy5zdHJpbmcub2NjdXJyZW5jZXMgPSBmdW5jdGlvbihjb250ZW50LCBzZWFyY2hTdHJpbmcpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgdmFyIHRpbWVzID0gMCwgcG9zaXRpb24gPSAtMiwgcmVzdWx0ID0gW107XHJcbiAgaWYgKHNlYXJjaFN0cmluZy5sZW5ndGggPCAxKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICB7bnRoOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIHBvc2l0aW9uOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LFxyXG4gICAgICB7bnRoOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIHBvc2l0aW9uOiAtMX1cclxuICAgIF07XHJcbiAgfVxyXG4gIHdoaWxlIChwb3NpdGlvbiAhPT0gLTEpIHtcclxuICAgIHBvc2l0aW9uID0gY29udGVudC5pbmRleE9mKHNlYXJjaFN0cmluZywgcG9zaXRpb24gKyAxKTtcclxuICAgIGlmIChwb3NpdGlvbiA8IDApIHtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXN1bHQucHVzaCh7bnRoOiArK3RpbWVzLCBwb3NpdGlvbjogcG9zaXRpb259KTtcclxuICB9XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuXHJcblxyXG4vKipcclxuICogdGhlIG9jY3VycmVuY2VzIG9mIHNlYXJjaFN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VhcmNoU3RyaW5nXHJcbiAqIEByZXR1cm4ge051bWJlcn1cclxuICovXHJcbnRzLnRvbS51dGlscy5zdHJpbmcudGltZXMgPSBmdW5jdGlvbihjb250ZW50LCBzZWFyY2hTdHJpbmcpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgdmFyIG9jY3VycyA9IHRzLnRvbS51dGlscy5zdHJpbmcub2NjdXJyZW5jZXMoY29udGVudCwgc2VhcmNoU3RyaW5nKTtcclxuICB2YXIgdGVtcCA9IG9jY3Vyc1tvY2N1cnMubGVuZ3RoIC0gMV07XHJcbiAgcmV0dXJuIHRlbXAgPyB0ZW1wLm50aCA6IDA7XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50IGNvbnRlbnQgdG8gYmUgY29tcGFjdFxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IGNvbXBhY3RlZCBzdHJpbmdcclxuICovXHJcbnRzLnRvbS51dGlscy5zdHJpbmcuY29tcGFjdCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZSgvXFxzKy9nbSwgJycpO1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCBzdHJpbmcgdG8gYmUgdHJpbW1lZFxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRyaW1tZWQgc3RyaW5nXHJcbiAqL1xyXG50cy50b20udXRpbHMuc3RyaW5nLnRyaW0gPSBmdW5jdGlvbihjb250ZW50KSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIHJldHVybiBjb250ZW50LnJlcGxhY2UoLyheXFxzKil8KFxccyokKS9nLCAnJyk7XHJcbn07XHJcbiIsInZhciB0cyA9IHRzIHx8IHt9O1xyXG50cy50b20gPSB0cy50b20gfHwge307XHJcbnRzLnRvbS5jb3JlID0gdHMudG9tLmNvcmUgfHwge307XHJcblxyXG5cclxuLyoqXHJcbiAqIEBleHBvcnRcclxuICogQHBhcmFtIHtSYW5nZX0gcmFuZ2VcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqL1xyXG50cy50b20uY29yZS5TZWxlY3Rpb24gPSBmdW5jdGlvbihyYW5nZSkge1xyXG4gIC8qKlxyXG4gICAqIEB0eXBlIHtSYW5nZX1cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHRoaXMucmFuZ2VfID0gcmFuZ2U7XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqIEBleHBvcnRcclxuICogQHJldHVybiB7QXJyYXkuPFRleHQ+fVxyXG4gKi9cclxudHMudG9tLmNvcmUuU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRUZXh0Tm9kZXMgPSBmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgLyoqXHJcbiAgICogQGV4cG9ydFxyXG4gICAqIEBwYXJhbSB7VGV4dHx7c3RhcnRQb3NpdGlvbiwgZW5kUG9zaXRpb259fSBjb250YWluZXJcclxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0XHJcbiAgICogQHJldHVybiB7VGV4dH1cclxuICAgKi9cclxuICBmdW5jdGlvbiBzcGxpdChjb250YWluZXIsIG9mZnNldCkge1xyXG4gICAgdmFyIHJwID0gY29udGFpbmVyLnNwbGl0VGV4dChvZmZzZXQpO1xyXG4gICAgcnAuc3RhcnRQb3NpdGlvbiA9IGNvbnRhaW5lci5zdGFydFBvc2l0aW9uICsgdHMudG9tLnV0aWxzLnN0cmluZy5jb21wYWN0KGNvbnRhaW5lci5kYXRhKS5sZW5ndGg7XHJcbiAgICBycC5lbmRQb3NpdGlvbiA9IGNvbnRhaW5lci5lbmRQb3NpdGlvbjtcclxuICAgIGNvbnRhaW5lci5lbmRQb3NpdGlvbiA9IHJwLnN0YXJ0UG9zaXRpb24gLSAxO1xyXG4gICAgcmV0dXJuIHJwO1xyXG4gIH1cclxuXHJcbiAgdmFyIHNjID0gLyoqQHR5cGUge1RleHR9Ki8odGhpcy5yYW5nZV8uc3RhcnRDb250YWluZXIpLCBlYyA9IC8qKkB0eXBlIHtUZXh0fSovKHRoaXMucmFuZ2VfLmVuZENvbnRhaW5lciksXHJcbiAgICAgIHNvID0gdGhpcy5yYW5nZV8uc3RhcnRPZmZzZXQsIGVvID0gdGhpcy5yYW5nZV8uZW5kT2Zmc2V0O1xyXG4gIHZhciBiTm9kZXMgPSBkb2N1bWVudC5ib2R5LmRhdGEudE5vZGVzO1xyXG4gIHZhciBzaSA9IGJOb2Rlcy5pbmRleE9mKHNjKTtcclxuICB2YXIgc3JwID0gc3BsaXQoc2MsIHNvKTtcclxuICBpZiAoc3JwLmxlbmd0aCA+IDApIHtcclxuICAgIGJOb2Rlcy5zcGxpY2Uoc2kgKyAxLCAwLCBzcnApO1xyXG4gIH1cclxuICBpZiAoZWMgPT09IHNjKSB7XHJcbiAgICBlYyA9IHNycDtcclxuICAgIGVvID0gZW8gLSBzbztcclxuICB9XHJcbiAgdmFyIGVpID0gYk5vZGVzLmluZGV4T2YoZWMpO1xyXG4gIHZhciBlcnAgPSBzcGxpdChlYywgZW8pO1xyXG4gIGlmIChlcnAubGVuZ3RoID4gMCkge1xyXG4gICAgYk5vZGVzLnNwbGljZShlaSArIDEsIDAsIGVycCk7XHJcbiAgfVxyXG4gIHJldHVybiBiTm9kZXMuc2xpY2Uoc2kgKyAxLCBlaSArIDEpO1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAZXhwb3J0XHJcbiAqIEByZXR1cm4ge051bWJlcn1cclxuICovXHJcbnRzLnRvbS5jb3JlLlNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0SW5kZXggPSBmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgdmFyIGNvbnRhaW5lciA9IHRoaXMucmFuZ2VfLmVuZENvbnRhaW5lcjtcclxuICBpZiAoIShjb250YWluZXIgaW5zdGFuY2VvZiBUZXh0KSB8fCAhKHRoaXMucmFuZ2VfLnN0YXJ0Q29udGFpbmVyIGluc3RhbmNlb2YgVGV4dCkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBzZWxlY3Rpb24nKTtcclxuICB9XHJcbiAgdmFyIG9mZnNldCA9IHRoaXMucmFuZ2VfLmVuZE9mZnNldDtcclxuICB2YXIgY0hlYWQgPSB0cy50b20udXRpbHMuc3RyaW5nLmNvbXBhY3QoY29udGFpbmVyLnN1YnN0cmluZ0RhdGEoMCwgb2Zmc2V0KSk7XHJcbiAgdmFyIGNMZW5ndGggPSBjSGVhZCA/IGNIZWFkLmxlbmd0aCA6IDA7XHJcbiAgaWYgKGNMZW5ndGggPCAxKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2lsbGVnYWwgc2VsZWN0aW9uJyk7XHJcbiAgfVxyXG4gIHZhciBjVGV4dCA9IHRzLnRvbS51dGlscy5zdHJpbmcuY29tcGFjdCh0aGlzLnJhbmdlXy50b1N0cmluZygpKTtcclxuICByZXR1cm4gdHMudG9tLnV0aWxzLnN0cmluZy50aW1lcyhkb2N1bWVudC5ib2R5LmRhdGEudFRleHQuc3Vic3RyKDAsIGNvbnRhaW5lci5zdGFydFBvc2l0aW9uICsgY0xlbmd0aCksIGNUZXh0KTtcclxufTtcclxuXHJcblxyXG4vKipcclxuICogQGV4cG9ydFxyXG4gKiBAcmV0dXJuIHtTZWxlY3Rpb259XHJcbiAqL1xyXG50cy50b20uY29yZS5TZWxlY3Rpb24ucHJvdG90eXBlLmdldFNlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgaWYgKHNlbGVjdGlvbi5yYW5nZUNvdW50IDwgMSkge1xyXG4gICAgc2VsZWN0aW9uLmFkZFJhbmdlKHRoaXMucmFuZ2VfKTtcclxuICB9XHJcbiAgcmV0dXJuIHNlbGVjdGlvbjtcclxufTtcclxuXHJcblxyXG4vKipcclxuICogQGV4cG9ydFxyXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF90ZXh0XHJcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X250aFxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2VsZWN0ID0gZmFsc2Ugd2hldGhlciB0byBzZWxlY3QgdGhlIHJhbmdlXHJcbiAqIEByZXR1cm4ge3RzLnRvbS5jb3JlLlNlbGVjdGlvbn1cclxuICovXHJcbnRzLnRvbS5jb3JlLlNlbGVjdGlvbi5mcm9tID0gZnVuY3Rpb24ob3B0X3RleHQsIG9wdF9udGgsIG9wdF9zZWxlY3QpIHtcclxuICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xyXG4gIGlmICghb3B0X3RleHQgJiYgc2VsZWN0aW9uLnJhbmdlQ291bnQgPiAwKSB7XHJcbiAgICByZXR1cm4gbmV3IHRzLnRvbS5jb3JlLlNlbGVjdGlvbih3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VBdCgwKSk7XHJcbiAgfVxyXG4gIHZhciByYW5nZSA9IHRzLnRvbS5jb3JlLlNlbGVjdGlvbi5yYW5nZUZyb21fKG9wdF90ZXh0LCBvcHRfbnRoKTtcclxuICBpZiAob3B0X3NlbGVjdCkge1xyXG4gICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcclxuICB9XHJcbiAgcmV0dXJuIG5ldyB0cy50b20uY29yZS5TZWxlY3Rpb24ocmFuZ2UpO1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiAgcmV0dXJuIGFuIGVtcHR5IHJhbmdlIG9iamVjdCB0aGF0IGhhcyBib3RoIG9mIGl0cyBib3VuZGFyeSBwb2ludHMgcG9zaXRpb25lZCBhdFxyXG4gKiAgdGhlIGJlZ2lubmluZyBvZiB0aGUgZG9jdW1lbnQgd2hlbiBubyBwYXJhbWV0ZXJzIGFyZSBnaXZlbiwgZWxzZSByZXR1cm4gYW4gcmFuZ2VcclxuICogIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBudGggb2NjdXJyZW5jZSBvZiB0aGUgc3BlY2lmaWVkIHRleHRcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgdGhlIGJhc2UgdGV4dFxyXG4gKiBAcGFyYW0ge251bWJlcn0gbnRoID0gMSB0aGUgbnRoIGluZGV4XHJcbiAqIEByZXR1cm4ge1JhbmdlfSB0aGUgcmFuZ2UgY3JlYXRlZCB0aGF0IGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgdGV4dFxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxudHMudG9tLmNvcmUuU2VsZWN0aW9uLnJhbmdlRnJvbV8gPSBmdW5jdGlvbih0ZXh0LCBudGgpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpc1N0YXJ0IG9ubHkgMSBvciAwIGlzIGFjY2VwdGVkXHJcbiAgICogQHJldHVybiB7bnVtYmVyfVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIG9mZnNldChzdHIsIGNvdW50LCBpc1N0YXJ0KSB7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgaiA9IDA7IGkgPCBjb3VudCArIGlzU3RhcnQ7IGorKykge1xyXG4gICAgICBpZiAoIS9cXHMrL20udGVzdChzdHJbal0pKSB7XHJcbiAgICAgICAgaSsrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaiAtIGlzU3RhcnQ7XHJcbiAgfVxyXG5cclxuICBpZiAoIXRleHQpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB2YXIgYlRleHQgPSBkb2N1bWVudC5ib2R5LmRhdGEudFRleHQ7XHJcbiAgICB2YXIgYk5vZGVzID0gZG9jdW1lbnQuYm9keS5kYXRhLnROb2RlcztcclxuICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XHJcbiAgICB2YXIgY1RleHQgPSB0cy50b20udXRpbHMuc3RyaW5nLmNvbXBhY3QodGV4dCk7XHJcbiAgICB2YXIgaW5kZXggPSB0cy50b20udXRpbHMuc3RyaW5nLm50aEluZGV4T2YoYlRleHQsIGNUZXh0LCBudGggfHwgMSk7XHJcbiAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICB2YXIgY1N0YXJ0UG9zID0gaW5kZXggKyBiTm9kZXNbMF0uc3RhcnRQb3NpdGlvbjsvL2luY2x1ZGUgdGhlIGZpcnN0IGNoYXJhY3RlclxyXG4gICAgICB2YXIgY0VuZFBvcyA9IGNTdGFydFBvcyArIGNUZXh0Lmxlbmd0aDsvL2V4Y2x1ZGUgdGhlIGxhc3QgY2hhcmFjdGVyXHJcblxyXG4gICAgICB2YXIgc3RhcnRDb250YWluZXIgPSBudWxsLCBlbmRDb250YWluZXIgPSBudWxsO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJOb2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBub2RlID0gYk5vZGVzW2ldO1xyXG4gICAgICAgIGlmICghc3RhcnRDb250YWluZXIgJiYgbm9kZS5lbmRQb3NpdGlvbiA+PSBjU3RhcnRQb3MpIHtcclxuICAgICAgICAgIHN0YXJ0Q29udGFpbmVyID0gYk5vZGVzW2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm9kZS5zdGFydFBvc2l0aW9uID49IGNFbmRQb3MpIHtcclxuICAgICAgICAgIGVuZENvbnRhaW5lciA9IGJOb2Rlc1tpIC0gMV07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHN0YXJ0Q29udGFpbmVyICE9PSBudWxsKSB7XHJcbiAgICAgICAgZW5kQ29udGFpbmVyID0gZW5kQ29udGFpbmVyIHx8IGJOb2Rlc1tiTm9kZXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgdmFyIHN0YXJ0T2Zmc2V0ID0gb2Zmc2V0KHN0YXJ0Q29udGFpbmVyLmRhdGEsIGNTdGFydFBvcyAtIHN0YXJ0Q29udGFpbmVyLnN0YXJ0UG9zaXRpb24sIDEpO1xyXG4gICAgICAgIHZhciBlbmRPZmZzZXQgPSBvZmZzZXQoZW5kQ29udGFpbmVyLmRhdGEsIGNFbmRQb3MgLSBlbmRDb250YWluZXIuc3RhcnRQb3NpdGlvbiwgMCk7XHJcbiAgICAgICAgcmFuZ2Uuc2V0U3RhcnQoc3RhcnRDb250YWluZXIsIHN0YXJ0T2Zmc2V0KTtcclxuICAgICAgICByYW5nZS5zZXRFbmQoZW5kQ29udGFpbmVyLCBlbmRPZmZzZXQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmFuZ2U7XHJcbiAgfVxyXG59O1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgZnVuY3Rpb24gZ2V0VGV4dE5vZGVzKGVsZW1lbnQpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHZhciBub2RlcyA9IFtdO1xyXG4gICAgdmFyIGVsZXNUb1NraXAgPSB7XHJcbiAgICAgIGVsZW1lbnRzOiBbJ2FwcGxldCcsICdhcmVhJywgJ2Jhc2UnLCAnYmFzZWZvbnQnLCAnYmRvJywgJ2J1dHRvbicsICdmcmFtZScsICdmcmFtZXNldCcsICdpZnJhbWUnLFxyXG4gICAgICAgICdoZWFkJywgJ2hyJywgJ2ltZycsICdpbnB1dCcsICdsaW5rJywgJ21hcCcsICdtZXRhJywgJ25vZnJhbWVzJywgJ25vc2NyaXB0JywgJ29wdGdyb3VwJyxcclxuICAgICAgICAnb3B0aW9uJywgJ3BhcmFtJywgJ3NjcmlwdCcsICdzZWxlY3QnLCAnc3R5bGUnLCAndGV4dGFyZWEnLCAndGl0bGUnXSxcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxyXG4gICAgICAgKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fG51bGx9IGxpc3RcclxuICAgICAgICogQHJldHVybiB7Ym9vbGVhbn1cclxuICAgICAgICovXHJcbiAgICAgIHRlc3Q6IGZ1bmN0aW9uKG5vZGUsIGxpc3QpIHtcclxuICAgICAgICB2YXIgZWxlbWVudHMgPSBsaXN0IHx8IHRoaXMuZWxlbWVudHM7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzLmluZGV4T2Yobm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpID4gLTE7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VGV4dE5vZGVzKG5vZGUpIHtcclxuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMgJiYgL1xcUy8udGVzdChub2RlLmRhdGEpKSB7XHJcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcclxuICAgICAgfSBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSAxICYmICFlbGVzVG9Ta2lwLnRlc3Qobm9kZSwgbnVsbCkpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgICAgICBnZXRUZXh0Tm9kZXMobm9kZS5jaGlsZE5vZGVzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRUZXh0Tm9kZXMoZWxlbWVudCk7XHJcbiAgICByZXR1cm4gbm9kZXM7XHJcbiAgfVxyXG5cclxuICB2YXIgYm9keU5vZGVzID0gZ2V0VGV4dE5vZGVzKGRvY3VtZW50LmJvZHkpLCBwb3NpdGlvbiA9IDA7XHJcbiAgdmFyIGNCb2R5VGV4dCA9ICcnO1xyXG4gIGJvZHlOb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKC8qKkB0eXBlIHtUZXh0fSovbm9kZSkge1xyXG4gICAgbm9kZS5zdGFydFBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICB2YXIgY1RleHQgPSB0cy50b20udXRpbHMuc3RyaW5nLmNvbXBhY3Qobm9kZS5kYXRhKTtcclxuICAgIGNCb2R5VGV4dCArPSBjVGV4dDtcclxuICAgIHBvc2l0aW9uICs9IGNUZXh0Lmxlbmd0aDtcclxuICAgIG5vZGUuZW5kUG9zaXRpb24gPSBwb3NpdGlvbiAtIDE7XHJcbiAgfSk7XHJcbiAgZG9jdW1lbnQuYm9keS5kYXRhID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7QXJyYXkuPFRleHQ+fVxyXG4gICAgICovXHJcbiAgICB0Tm9kZXM6IGJvZHlOb2RlcyxcclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqL1xyXG4gICAgdFRleHQ6IGNCb2R5VGV4dFxyXG4gIH07XHJcbn0pO1xyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==